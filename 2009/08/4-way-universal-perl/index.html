<!doctype html>
<html lang="">
<head>
    <meta charset="utf-8"/>
    <title>Compiling a 4-way universal perl binary on osx - miscellaneous</title>
    <meta name="author" content="James A. Kyle">

    <link rel="top" href="#" /><link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,300italic,400italic,600italic|Source+Code+Pro' rel='stylesheet' type='text/css'></link>
    <link rel="stylesheet" href="../../../theme/css/main.css" type="text/css" />


        <link href="http://blog.jameskyle.org/feeds/atom.xml" type="application/atom+xml" rel="alternate" title="miscellaneous Atom Feed" />
</head>
<body>
    <div class="container">

      <header role="banner">
        <div class="feeds">
            <a href="../../../feeds/atom.xml" rel="alternate"><img src="/theme/images/icons/rss_32.png" alt="rss feed"/></a>

        </div>
          <div class="pages">
              <a href="../../../pages/about.html">About me</a>
            <span>-</span>
            <a href="../../../archives.html">Archives</a>
            <span>-</span>
            <a href="../../../tags.html">Tags</a>
          </div>
        <a href="../../.." class="title">miscellaneous</a>
      </header>

      <div class="wrapper">

          <div role="main" class="content">
    <article class="full">
            
        <h1>Compiling a 4-way universal perl binary on osx</h1>
        
        <p>If you don't like having all of your perl modules overwritten by
cavalier osx server updates, then you're either going with a macports
install or rolling your own. And if you don't want to give up
mod_auth_apple, you're probably rolling your own.</p>
<p>If you're using mod_perl on osx, then you've probably already run into
the issues with the 4-way httpd fat binary and a flat arch mod_perl not
working. There are various posts around the internet on how to set
archflags to get around this. However, if you're already compiling your
own perl binary the easiest method is to compile it with the flags you
want passed onto your perl modules.</p>
<p>So this is how to compile your perl binary with a 4-way (ppc ppc64
x86_64 i686) universal arch and by extension, compile all subsequent
modules with the same:</p>
<div class="highlight"><pre><span class="nb">export </span><span class="nv">SDK</span><span class="o">=</span>/Developer/SDKs/MacOSX10.5.sdk/
./Configure -Accflags<span class="o">=</span><span class="s2">&quot;-arch i686 -arch ppc -arch x86_64 -arch ppc64 \</span>
<span class="s2">  -fPIC -nostdinc -B$SDK/usr/include/gcc \</span>
<span class="s2">  -B$SDK/usr/lib/gcc -isystem$SDK/usr/include \</span>
<span class="s2">  -F$SDK/System/Library/Frameworks&quot;</span> <span class="se">\</span>
  -Aldflags<span class="o">=</span><span class="s2">&quot;-arch i686 -arch ppc -arch ppc64 -arch x86_64 \</span>
<span class="s2">  -Wl,-syslibroot,$SDK&quot;</span> -de

make
</pre></div>
   

    </article>

    <section>
        <p id="post-share-links">
            Share on:
            <a href="http://twitter.com/home?status=Compiling%20a%204-way%20universal%20perl%20binary%20on%20osx%20 http%3A//blog.jameskyle.org/2009/08/4-way-universal-perl" target="_blank" title="Share on Twitter">Twitter</a>
            ❄
            <a href="http://www.facebook.com/sharer/sharer.php?s=100&p[url]=http%3A//blog.jameskyle.org/2009/08/4-way-universal-perl&p[images][0]=&p[title]=Compiling%20a%204-way%20universal%20perl%20binary%20on%20osx%20&p[summary]=%3Cp%3EIf%20you%20don%27t%20like%20having%20all%20of%20your%20perl%20modules%20overwritten%20by%0Acavalier%20osx%20server%20updates%2C%20then%20you%27re%20either%20going%20with%20a%20macports%0Ainstall%20or%20rolling%20your%20own.%20And%20if%20you%20don%27t%20want%20to%20give%20up%0Amod_auth_apple%2C%20you%27re%20probably%20rolling%20your%20own.%3C/p%3E%0A%3Cp%3EIf%20you%27re%20using%20...%3C/p%3E" target="_blank" title="Share on Facebook">Facebook</a>
            ❄
            <a href="https://plus.google.com/share?url=http%3A//blog.jameskyle.org/2009/08/4-way-universal-perl" target="_blank" title="Share on Google Plus">Google+</a>
            ❄
            <a href="mailto:?subject=Compiling%20a%204-way%20universal%20perl%20binary%20on%20osx%20&body=http%3A//blog.jameskyle.org/2009/08/4-way-universal-perl" target="_blank" title="Share via Email">Email</a>
        </p>
    </section>
    <div class="comments">
    <h2>Comments !</h2>
        <div id="disqus_thread"></div>
        <script type="text/javascript">
           var disqus_identifier = "2009/08/4-way-universal-perl";
           (function() {
           var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
           dsq.src = 'http://blog-jameskyle.disqus.com/embed.js';
           (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
        </script>
    </div>

          </div>

          <div class="sidebar">

            <div class="widget">
              <h2>Categories</h2>
              <ul>
                  <li ><a href="../../../category/administration.html">administration</a></li>
                  <li ><a href="../../../category/apt.html">apt</a></li>
                  <li ><a href="../../../category/cocoa.html">cocoa</a></li>
                  <li ><a href="../../../category/debian.html">debian</a></li>
                  <li ><a href="../../../category/devops.html">devops</a></li>
                  <li ><a href="../../../category/docker.html">docker</a></li>
                  <li ><a href="../../../category/linux.html">linux</a></li>
                  <li ><a href="../../../category/miscellaneous.html">miscellaneous</a></li>
                  <li ><a href="../../../category/multimedia.html">multimedia</a></li>
                  <li ><a href="../../../category/opinion.html">opinion</a></li>
                  <li ><a href="../../../category/osx.html">osx</a></li>
                  <li class="active"><a href="../../../category/programming.html">programming</a></li>
                  <li ><a href="../../../category/reviews.html">reviews</a></li>
                  <li ><a href="../../../category/utilities.html">utilities</a></li>
                  <li ><a href="../../../category/zsh.html">zsh</a></li>
              </ul>
            </div>

              <div class="widget">
              <h2>Social</h2>
                <ul class="social">
                  <li><a href="http://github.com/jameskyle/">github</a><i></i></li>
                  <li><a href="https://twitter.com/jameskyle75">twitter</a><i></i></li>
                  <li><a href="https://bitbucket.org/jkyle">bitbucket</a><i></i></li>
                  <li><a href="https://plus.google.com/+jameskyle75">google+</a><i></i></li>
                  <li><a href="http://www.linkedin.com/in/jamesakyle">linkedin</a><i></i></li>
                </ul>
              </div>

              <div class="widget blogroll">
                <h2>Blogroll</h2>
                <ul>
                    <li><a href="http://docs.notmyidea.org/alexis/pelican/">Pelican</a></li>
                    <li><a href="http://www.doughellmann.com">Doug Hellmann</a></li>
                    <li><a href="http://www.openstack.org/blog/">Openstack</a></li>
                </ul>
              </div>

          </div>

      </div>

      <footer>
        <p role="contentinfo">
          © 2013 James A. Kyle - Proudly powered by
          <a href="http://alexis.notmyidea.org/pelican/">pelican</a>.
          Theme <a href="https://github.com/fle/pelican-simplegrey">
              pelican-simplegrey
          </a>, modified.
        </p>

      </footer>

    </div>

      <script>
        var _gaq=[['_setAccount','UA-23876265-2'],['_trackPageview']];
        (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
        g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
        s.parentNode.insertBefore(g,s)}(document,'script'));
      </script>

</body>
</html>